function yadex_modal(data) {
  // console.log('Here is the data from other file : ' + data);
  let pickupPointData = data;
  console.log(pickupPointData);

  const openModalButton = document.getElementById("openModal");
  const closeModalButton = document.getElementById("closeModal");
  const modal = document.getElementById("modal");
  const header = document.getElementById("masthead");





  openModalButton.addEventListener("click", () => {
    modal.style.display = "block";
    document.body.classList.add("modal-open");
    header.style.display = "none";
  });





  function closeModal() {
    modal.style.display = "none";
    document.body.classList.remove("modal-open");
    header.style.display = "block";
  }
  




  closeModalButton.addEventListener("click", closeModal);
  

let map;

  // initialize map
  ymaps.ready(initMap);
  async function initMap() {
    const firstPickupPoint = pickupPointData[0];
    const firstCoordinates = firstPickupPoint.coordinates;

     map = new ymaps.Map("map", {
      center: [firstCoordinates.latitude, firstCoordinates.longitude],
      zoom: 10,
    });
    
    createMarkers(map, pickupPointData);

  }





  
  // Create Markers
  function createMarkers(map, data) {
    let objectManager = new ymaps.ObjectManager({
      clusterize: true,
      geoObjectOpenBalloonOnClick: false,
      clusterOpenBalloonOnClick: false,
    });

    const placemarks = [];

    data.forEach((pickupPoint, index) => {
      const coordinates = [
        pickupPoint.coordinates.latitude,
        pickupPoint.coordinates.longitude,
      ];

      placemarks.push({
        type: "Feature",
        id: index,
        geometry: {
          type: "Point",
          coordinates: coordinates,
        },
        properties: {
          balloonContentHeader: `<h3 class="balloon-header">${pickupPoint.name}</h3>`,
          balloonContentBody: `
                    <div class="balloon-body">
                    <div class= "credit_pay">
                    <svg width="127" height="20" viewBox="0 0 127 20" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M1.66699 10.0002C1.66699 6.85747 1.66699 5.28612 2.6433 4.30981C3.61961 3.3335 5.19096 3.3335 8.33366 3.3335H11.667C14.8097 3.3335 16.381 3.3335 17.3573 4.30981C18.3337 5.28612 18.3337 6.85747 18.3337 10.0002C18.3337 13.1429 18.3337 14.7142 17.3573 15.6905C16.381 16.6668 14.8097 16.6668 11.667 16.6668H8.33366C5.19096 16.6668 3.61961 16.6668 2.6433 15.6905C1.66699 14.7142 1.66699 13.1429 1.66699 10.0002Z" stroke="#2B2B2B"/>
<path d="M8.33333 13.3335H5" stroke="#2B2B2B" stroke-linecap="round"/>
<path d="M11.667 13.3335H10.417" stroke="#2B2B2B" stroke-linecap="round"/>
<path d="M1.66699 8.3335L18.3337 8.3335" stroke="#2B2B2B" stroke-linecap="round"/>
<path d="M28.08 9.9C28.08 10.7427 28.2613 11.4947 28.624 12.156C28.9973 12.8173 29.504 13.34 30.144 13.724C30.784 14.108 31.5093 14.3 32.32 14.3C33.1413 14.3 33.8667 14.108 34.496 13.724C35.136 13.34 35.6373 12.8173 36 12.156C36.3733 11.4947 36.56 10.7427 36.56 9.9C36.56 9.05733 36.3733 8.30533 36 7.644C35.6373 6.98267 35.136 6.46 34.496 6.076C33.8667 5.692 33.1413 5.5 32.32 5.5C31.5093 5.5 30.784 5.692 30.144 6.076C29.504 6.46 28.9973 6.98267 28.624 7.644C28.2613 8.30533 28.08 9.05733 28.08 9.9ZM26.64 9.9C26.64 9.07867 26.7787 8.32133 27.056 7.628C27.344 6.924 27.744 6.316 28.256 5.804C28.768 5.28133 29.3707 4.876 30.064 4.588C30.7573 4.28933 31.5093 4.14 32.32 4.14C33.1413 4.14 33.8933 4.28933 34.576 4.588C35.2693 4.876 35.872 5.28133 36.384 5.804C36.896 6.316 37.2907 6.924 37.568 7.628C37.856 8.32133 38 9.07867 38 9.9C38 10.7107 37.856 11.468 37.568 12.172C37.2907 12.876 36.896 13.4893 36.384 14.012C35.872 14.524 35.2693 14.9293 34.576 15.228C33.8933 15.516 33.1413 15.66 32.32 15.66C31.5093 15.66 30.7573 15.516 30.064 15.228C29.3707 14.9293 28.768 14.524 28.256 14.012C27.744 13.4893 27.344 12.876 27.056 12.172C26.7787 11.468 26.64 10.7107 26.64 9.9ZM45.8406 8.14V15.5H44.5606V9.34H41.1206V15.5H39.8406V8.14H45.8406ZM54.6949 8.14V15.5H53.4149V9.34H49.6549V12.94C49.6549 13.516 49.5642 13.996 49.3829 14.38C49.2122 14.7533 48.9455 15.036 48.5829 15.228C48.2202 15.4093 47.7615 15.5 47.2069 15.5V14.332C47.5269 14.332 47.7989 14.2307 48.0229 14.028C48.2575 13.8253 48.3749 13.4627 48.3749 12.94V8.14H54.6949ZM57.7448 13.34C57.7448 13.596 57.8141 13.8147 57.9528 13.996C58.0914 14.1667 58.2781 14.3 58.5128 14.396C58.7474 14.4813 59.0088 14.524 59.2968 14.524C59.7234 14.524 60.1021 14.46 60.4328 14.332C60.7634 14.204 61.0194 14.0013 61.2008 13.724C61.3928 13.4467 61.4888 13.0787 61.4888 12.62L61.7448 13.42C61.7448 13.8893 61.6168 14.2947 61.3608 14.636C61.1154 14.9667 60.7848 15.2227 60.3688 15.404C59.9528 15.5747 59.4888 15.66 58.9768 15.66C58.5181 15.66 58.0968 15.5747 57.7128 15.404C57.3288 15.2333 57.0194 14.9827 56.7848 14.652C56.5608 14.3107 56.4488 13.8893 56.4488 13.388C56.4488 12.8653 56.5768 12.4227 56.8328 12.06C57.0888 11.6973 57.4514 11.42 57.9208 11.228C58.3901 11.0253 58.9448 10.924 59.5848 10.924C60.0541 10.924 60.4541 10.988 60.7848 11.116C61.1261 11.2333 61.3981 11.372 61.6008 11.532C61.8034 11.6813 61.9421 11.804 62.0168 11.9V12.652C61.6541 12.396 61.2861 12.2093 60.9128 12.092C60.5394 11.964 60.1181 11.9 59.6488 11.9C59.2221 11.9 58.8648 11.9587 58.5768 12.076C58.2994 12.1933 58.0914 12.3587 57.9528 12.572C57.8141 12.7853 57.7448 13.0413 57.7448 13.34ZM57.7448 9.868L57.1208 8.892C57.3981 8.68933 57.7714 8.48667 58.2408 8.284C58.7101 8.08133 59.2754 7.98 59.9368 7.98C60.5021 7.98 60.9928 8.07067 61.4088 8.252C61.8354 8.42267 62.1661 8.67333 62.4008 9.004C62.6461 9.33467 62.7688 9.74 62.7688 10.22V15.5H61.4888V10.22C61.4888 9.84667 61.3288 9.56933 61.0088 9.388C60.6994 9.196 60.3421 9.1 59.9368 9.1C59.5848 9.1 59.2648 9.148 58.9768 9.244C58.6888 9.32933 58.4381 9.436 58.2248 9.564C58.0221 9.68133 57.8621 9.78267 57.7448 9.868ZM63.8144 8.14H68.1344V9.34H63.8144V8.14ZM65.3344 8.46H66.6144V15.5H65.3344V8.46ZM69.9948 13.34C69.9948 13.596 70.0641 13.8147 70.2028 13.996C70.3414 14.1667 70.5281 14.3 70.7628 14.396C70.9974 14.4813 71.2588 14.524 71.5468 14.524C71.9734 14.524 72.3521 14.46 72.6828 14.332C73.0134 14.204 73.2694 14.0013 73.4508 13.724C73.6428 13.4467 73.7388 13.0787 73.7388 12.62L73.9948 13.42C73.9948 13.8893 73.8668 14.2947 73.6108 14.636C73.3654 14.9667 73.0348 15.2227 72.6188 15.404C72.2028 15.5747 71.7388 15.66 71.2268 15.66C70.7681 15.66 70.3468 15.5747 69.9628 15.404C69.5788 15.2333 69.2694 14.9827 69.0348 14.652C68.8108 14.3107 68.6988 13.8893 68.6988 13.388C68.6988 12.8653 68.8268 12.4227 69.0828 12.06C69.3388 11.6973 69.7014 11.42 70.1708 11.228C70.6401 11.0253 71.1948 10.924 71.8348 10.924C72.3041 10.924 72.7041 10.988 73.0348 11.116C73.3761 11.2333 73.6481 11.372 73.8508 11.532C74.0534 11.6813 74.1921 11.804 74.2668 11.9V12.652C73.9041 12.396 73.5361 12.2093 73.1628 12.092C72.7894 11.964 72.3681 11.9 71.8988 11.9C71.4721 11.9 71.1148 11.9587 70.8268 12.076C70.5494 12.1933 70.3414 12.3587 70.2028 12.572C70.0641 12.7853 69.9948 13.0413 69.9948 13.34ZM69.9948 9.868L69.3708 8.892C69.6481 8.68933 70.0214 8.48667 70.4908 8.284C70.9601 8.08133 71.5254 7.98 72.1868 7.98C72.7521 7.98 73.2428 8.07067 73.6588 8.252C74.0854 8.42267 74.4161 8.67333 74.6508 9.004C74.8961 9.33467 75.0188 9.74 75.0188 10.22V15.5H73.7388V10.22C73.7388 9.84667 73.5788 9.56933 73.2588 9.388C72.9494 9.196 72.5921 9.1 72.1868 9.1C71.8348 9.1 71.5148 9.148 71.2268 9.244C70.9388 9.32933 70.6881 9.436 70.4748 9.564C70.2721 9.68133 70.1121 9.78267 69.9948 9.868ZM81.9013 8.14H83.1813V15.5H81.9013V8.14ZM85.9013 8.14H87.5013L84.3013 11.18L87.8213 15.5H86.2213L82.7013 11.18L85.9013 8.14ZM89.6041 13.34C89.6041 13.596 89.6735 13.8147 89.8121 13.996C89.9508 14.1667 90.1375 14.3 90.3721 14.396C90.6068 14.4813 90.8681 14.524 91.1561 14.524C91.5828 14.524 91.9615 14.46 92.2921 14.332C92.6228 14.204 92.8788 14.0013 93.0601 13.724C93.2521 13.4467 93.3481 13.0787 93.3481 12.62L93.6041 13.42C93.6041 13.8893 93.4761 14.2947 93.2201 14.636C92.9748 14.9667 92.6441 15.2227 92.2281 15.404C91.8121 15.5747 91.3481 15.66 90.8361 15.66C90.3775 15.66 89.9561 15.5747 89.5721 15.404C89.1881 15.2333 88.8788 14.9827 88.6441 14.652C88.4201 14.3107 88.3081 13.8893 88.3081 13.388C88.3081 12.8653 88.4361 12.4227 88.6921 12.06C88.9481 11.6973 89.3108 11.42 89.7801 11.228C90.2495 11.0253 90.8041 10.924 91.4441 10.924C91.9135 10.924 92.3135 10.988 92.6441 11.116C92.9855 11.2333 93.2575 11.372 93.4601 11.532C93.6628 11.6813 93.8015 11.804 93.8761 11.9V12.652C93.5135 12.396 93.1455 12.2093 92.7721 12.092C92.3988 11.964 91.9775 11.9 91.5081 11.9C91.0815 11.9 90.7241 11.9587 90.4361 12.076C90.1588 12.1933 89.9508 12.3587 89.8121 12.572C89.6735 12.7853 89.6041 13.0413 89.6041 13.34ZM89.6041 9.868L88.9801 8.892C89.2575 8.68933 89.6308 8.48667 90.1001 8.284C90.5695 8.08133 91.1348 7.98 91.7961 7.98C92.3615 7.98 92.8521 8.07067 93.2681 8.252C93.6948 8.42267 94.0255 8.67333 94.2601 9.004C94.5055 9.33467 94.6281 9.74 94.6281 10.22V15.5H93.3481V10.22C93.3481 9.84667 93.1881 9.56933 92.8681 9.388C92.5588 9.196 92.2015 9.1 91.7961 9.1C91.4441 9.1 91.1241 9.148 90.8361 9.244C90.5481 9.32933 90.2975 9.436 90.0841 9.564C89.8815 9.68133 89.7215 9.78267 89.6041 9.868ZM97.9938 19.02H96.7138V8.14H97.9938V19.02ZM104.154 11.82C104.154 12.6093 103.988 13.292 103.658 13.868C103.327 14.444 102.884 14.8867 102.33 15.196C101.786 15.5053 101.178 15.66 100.506 15.66C99.8978 15.66 99.3591 15.5053 98.8898 15.196C98.4311 14.8867 98.0684 14.444 97.8018 13.868C97.5458 13.292 97.4178 12.6093 97.4178 11.82C97.4178 11.02 97.5458 10.3373 97.8018 9.772C98.0684 9.196 98.4311 8.75333 98.8898 8.444C99.3591 8.13467 99.8978 7.98 100.506 7.98C101.178 7.98 101.786 8.13467 102.33 8.444C102.884 8.75333 103.327 9.196 103.658 9.772C103.988 10.3373 104.154 11.02 104.154 11.82ZM102.858 11.82C102.858 11.2547 102.74 10.7747 102.506 10.38C102.282 9.98533 101.978 9.68667 101.594 9.484C101.22 9.28133 100.804 9.18 100.346 9.18C99.9724 9.18 99.6044 9.28133 99.2418 9.484C98.8791 9.68667 98.5804 9.98533 98.3458 10.38C98.1111 10.7747 97.9938 11.2547 97.9938 11.82C97.9938 12.3853 98.1111 12.8653 98.3458 13.26C98.5804 13.6547 98.8791 13.9533 99.2418 14.156C99.6044 14.3587 99.9724 14.46 100.346 14.46C100.804 14.46 101.22 14.3587 101.594 14.156C101.978 13.9533 102.282 13.6547 102.506 13.26C102.74 12.8653 102.858 12.3853 102.858 11.82ZM104.799 8.14H109.119V9.34H104.799V8.14ZM106.319 8.46H107.599V15.5H106.319V8.46ZM109.529 11.82C109.529 11.0733 109.694 10.412 110.025 9.836C110.366 9.26 110.825 8.80667 111.401 8.476C111.977 8.14533 112.622 7.98 113.337 7.98C114.062 7.98 114.707 8.14533 115.273 8.476C115.849 8.80667 116.302 9.26 116.633 9.836C116.974 10.412 117.145 11.0733 117.145 11.82C117.145 12.556 116.974 13.2173 116.633 13.804C116.302 14.38 115.849 14.8333 115.273 15.164C114.707 15.4947 114.062 15.66 113.337 15.66C112.622 15.66 111.977 15.4947 111.401 15.164C110.825 14.8333 110.366 14.38 110.025 13.804C109.694 13.2173 109.529 12.556 109.529 11.82ZM110.825 11.82C110.825 12.332 110.931 12.7853 111.145 13.18C111.369 13.5747 111.667 13.8893 112.041 14.124C112.425 14.348 112.857 14.46 113.337 14.46C113.817 14.46 114.243 14.348 114.617 14.124C115.001 13.8893 115.299 13.5747 115.513 13.18C115.737 12.7853 115.849 12.332 115.849 11.82C115.849 11.308 115.737 10.8547 115.513 10.46C115.299 10.0547 115.001 9.74 114.617 9.516C114.243 9.292 113.817 9.18 113.337 9.18C112.857 9.18 112.425 9.292 112.041 9.516C111.667 9.74 111.369 10.0547 111.145 10.46C110.931 10.8547 110.825 11.308 110.825 11.82ZM125.063 9.42L118.983 16.06L119.063 14.22L125.143 7.58L125.063 9.42ZM120.263 8.14V14.3L118.983 16.06V8.14H120.263ZM125.143 7.58V15.5H123.863V9.34L125.143 7.58ZM119.575 4.38H120.711C120.711 4.51867 120.748 4.684 120.823 4.876C120.898 5.05733 121.036 5.22267 121.239 5.372C121.442 5.51067 121.73 5.58 122.103 5.58C122.476 5.58 122.764 5.51067 122.967 5.372C123.17 5.22267 123.308 5.05733 123.383 4.876C123.458 4.684 123.495 4.51867 123.495 4.38H124.631C124.631 4.74267 124.535 5.1 124.343 5.452C124.162 5.79333 123.884 6.076 123.511 6.3C123.138 6.51333 122.668 6.62 122.103 6.62C121.548 6.62 121.079 6.51333 120.695 6.3C120.322 6.076 120.039 5.79333 119.847 5.452C119.666 5.1 119.575 4.74267 119.575 4.38Z" fill="#2B2B2B"/>
</svg>

                    </div>
                    <div class = "cash_pay">
                    <svg width="161" height="20" viewBox="0 0 161 20" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M5 6.6665H8.33333" stroke="#2B2B2B" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M17.3611 7.5H15.1923C13.7054 7.5 12.5 8.61929 12.5 10C12.5 11.3807 13.7054 12.5 15.1923 12.5H17.3611C17.4306 12.5 17.4653 12.5 17.4946 12.4982C17.944 12.4709 18.302 12.1385 18.3314 11.7212C18.3333 11.6939 18.3333 11.6617 18.3333 11.5972V8.40278C18.3333 8.33829 18.3333 8.30605 18.3314 8.27883C18.302 7.86153 17.944 7.52914 17.4946 7.50178C17.4653 7.5 17.4306 7.5 17.3611 7.5Z" stroke="#2B2B2B"/>
<path d="M17.4712 7.50016C17.4064 5.93991 17.1975 4.98328 16.524 4.30981C15.5477 3.3335 13.9764 3.3335 10.8337 3.3335L8.33366 3.3335C5.19096 3.3335 3.61961 3.3335 2.6433 4.30981C1.66699 5.28612 1.66699 6.85747 1.66699 10.0002C1.66699 13.1429 1.66699 14.7142 2.6433 15.6905C3.61961 16.6668 5.19096 16.6668 8.33366 16.6668H10.8337C13.9764 16.6668 15.5477 16.6668 16.524 15.6905C17.1975 15.017 17.4064 14.0604 17.4712 12.5002" stroke="#2B2B2B"/>
<path d="M14.9922 10H14.9997" stroke="#2B2B2B" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M28.08 9.9C28.08 10.7427 28.2613 11.4947 28.624 12.156C28.9973 12.8173 29.504 13.34 30.144 13.724C30.784 14.108 31.5093 14.3 32.32 14.3C33.1413 14.3 33.8667 14.108 34.496 13.724C35.136 13.34 35.6373 12.8173 36 12.156C36.3733 11.4947 36.56 10.7427 36.56 9.9C36.56 9.05733 36.3733 8.30533 36 7.644C35.6373 6.98267 35.136 6.46 34.496 6.076C33.8667 5.692 33.1413 5.5 32.32 5.5C31.5093 5.5 30.784 5.692 30.144 6.076C29.504 6.46 28.9973 6.98267 28.624 7.644C28.2613 8.30533 28.08 9.05733 28.08 9.9ZM26.64 9.9C26.64 9.07867 26.7787 8.32133 27.056 7.628C27.344 6.924 27.744 6.316 28.256 5.804C28.768 5.28133 29.3707 4.876 30.064 4.588C30.7573 4.28933 31.5093 4.14 32.32 4.14C33.1413 4.14 33.8933 4.28933 34.576 4.588C35.2693 4.876 35.872 5.28133 36.384 5.804C36.896 6.316 37.2907 6.924 37.568 7.628C37.856 8.32133 38 9.07867 38 9.9C38 10.7107 37.856 11.468 37.568 12.172C37.2907 12.876 36.896 13.4893 36.384 14.012C35.872 14.524 35.2693 14.9293 34.576 15.228C33.8933 15.516 33.1413 15.66 32.32 15.66C31.5093 15.66 30.7573 15.516 30.064 15.228C29.3707 14.9293 28.768 14.524 28.256 14.012C27.744 13.4893 27.344 12.876 27.056 12.172C26.7787 11.468 26.64 10.7107 26.64 9.9ZM45.8406 8.14V15.5H44.5606V9.34H41.1206V15.5H39.8406V8.14H45.8406ZM54.6949 8.14V15.5H53.4149V9.34H49.6549V12.94C49.6549 13.516 49.5642 13.996 49.3829 14.38C49.2122 14.7533 48.9455 15.036 48.5829 15.228C48.2202 15.4093 47.7615 15.5 47.2069 15.5V14.332C47.5269 14.332 47.7989 14.2307 48.0229 14.028C48.2575 13.8253 48.3749 13.4627 48.3749 12.94V8.14H54.6949ZM57.7448 13.34C57.7448 13.596 57.8141 13.8147 57.9528 13.996C58.0914 14.1667 58.2781 14.3 58.5128 14.396C58.7474 14.4813 59.0088 14.524 59.2968 14.524C59.7234 14.524 60.1021 14.46 60.4328 14.332C60.7634 14.204 61.0194 14.0013 61.2008 13.724C61.3928 13.4467 61.4888 13.0787 61.4888 12.62L61.7448 13.42C61.7448 13.8893 61.6168 14.2947 61.3608 14.636C61.1154 14.9667 60.7848 15.2227 60.3688 15.404C59.9528 15.5747 59.4888 15.66 58.9768 15.66C58.5181 15.66 58.0968 15.5747 57.7128 15.404C57.3288 15.2333 57.0194 14.9827 56.7848 14.652C56.5608 14.3107 56.4488 13.8893 56.4488 13.388C56.4488 12.8653 56.5768 12.4227 56.8328 12.06C57.0888 11.6973 57.4514 11.42 57.9208 11.228C58.3901 11.0253 58.9448 10.924 59.5848 10.924C60.0541 10.924 60.4541 10.988 60.7848 11.116C61.1261 11.2333 61.3981 11.372 61.6008 11.532C61.8034 11.6813 61.9421 11.804 62.0168 11.9V12.652C61.6541 12.396 61.2861 12.2093 60.9128 12.092C60.5394 11.964 60.1181 11.9 59.6488 11.9C59.2221 11.9 58.8648 11.9587 58.5768 12.076C58.2994 12.1933 58.0914 12.3587 57.9528 12.572C57.8141 12.7853 57.7448 13.0413 57.7448 13.34ZM57.7448 9.868L57.1208 8.892C57.3981 8.68933 57.7714 8.48667 58.2408 8.284C58.7101 8.08133 59.2754 7.98 59.9368 7.98C60.5021 7.98 60.9928 8.07067 61.4088 8.252C61.8354 8.42267 62.1661 8.67333 62.4008 9.004C62.6461 9.33467 62.7688 9.74 62.7688 10.22V15.5H61.4888V10.22C61.4888 9.84667 61.3288 9.56933 61.0088 9.388C60.6994 9.196 60.3421 9.1 59.9368 9.1C59.5848 9.1 59.2648 9.148 58.9768 9.244C58.6888 9.32933 58.4381 9.436 58.2248 9.564C58.0221 9.68133 57.8621 9.78267 57.7448 9.868ZM63.8144 8.14H68.1344V9.34H63.8144V8.14ZM65.3344 8.46H66.6144V15.5H65.3344V8.46ZM69.9948 13.34C69.9948 13.596 70.0641 13.8147 70.2028 13.996C70.3414 14.1667 70.5281 14.3 70.7628 14.396C70.9974 14.4813 71.2588 14.524 71.5468 14.524C71.9734 14.524 72.3521 14.46 72.6828 14.332C73.0134 14.204 73.2694 14.0013 73.4508 13.724C73.6428 13.4467 73.7388 13.0787 73.7388 12.62L73.9948 13.42C73.9948 13.8893 73.8668 14.2947 73.6108 14.636C73.3654 14.9667 73.0348 15.2227 72.6188 15.404C72.2028 15.5747 71.7388 15.66 71.2268 15.66C70.7681 15.66 70.3468 15.5747 69.9628 15.404C69.5788 15.2333 69.2694 14.9827 69.0348 14.652C68.8108 14.3107 68.6988 13.8893 68.6988 13.388C68.6988 12.8653 68.8268 12.4227 69.0828 12.06C69.3388 11.6973 69.7014 11.42 70.1708 11.228C70.6401 11.0253 71.1948 10.924 71.8348 10.924C72.3041 10.924 72.7041 10.988 73.0348 11.116C73.3761 11.2333 73.6481 11.372 73.8508 11.532C74.0534 11.6813 74.1921 11.804 74.2668 11.9V12.652C73.9041 12.396 73.5361 12.2093 73.1628 12.092C72.7894 11.964 72.3681 11.9 71.8988 11.9C71.4721 11.9 71.1148 11.9587 70.8268 12.076C70.5494 12.1933 70.3414 12.3587 70.2028 12.572C70.0641 12.7853 69.9948 13.0413 69.9948 13.34ZM69.9948 9.868L69.3708 8.892C69.6481 8.68933 70.0214 8.48667 70.4908 8.284C70.9601 8.08133 71.5254 7.98 72.1868 7.98C72.7521 7.98 73.2428 8.07067 73.6588 8.252C74.0854 8.42267 74.4161 8.67333 74.6508 9.004C74.8961 9.33467 75.0188 9.74 75.0188 10.22V15.5H73.7388V10.22C73.7388 9.84667 73.5788 9.56933 73.2588 9.388C72.9494 9.196 72.5921 9.1 72.1868 9.1C71.8348 9.1 71.5148 9.148 71.2268 9.244C70.9388 9.32933 70.6881 9.436 70.4748 9.564C70.2721 9.68133 70.1121 9.78267 69.9948 9.868ZM82.7333 12.22V11.02H88.1733V12.22H82.7333ZM87.3413 8.14H88.6213V15.5H87.3413V8.14ZM81.9813 8.14H83.2613V15.5H81.9813V8.14ZM91.6041 13.34C91.6041 13.596 91.6735 13.8147 91.8121 13.996C91.9508 14.1667 92.1375 14.3 92.3721 14.396C92.6068 14.4813 92.8681 14.524 93.1561 14.524C93.5828 14.524 93.9615 14.46 94.2921 14.332C94.6228 14.204 94.8788 14.0013 95.0601 13.724C95.2521 13.4467 95.3481 13.0787 95.3481 12.62L95.6041 13.42C95.6041 13.8893 95.4761 14.2947 95.2201 14.636C94.9748 14.9667 94.6441 15.2227 94.2281 15.404C93.8121 15.5747 93.3481 15.66 92.8361 15.66C92.3775 15.66 91.9561 15.5747 91.5721 15.404C91.1881 15.2333 90.8788 14.9827 90.6441 14.652C90.4201 14.3107 90.3081 13.8893 90.3081 13.388C90.3081 12.8653 90.4361 12.4227 90.6921 12.06C90.9481 11.6973 91.3108 11.42 91.7801 11.228C92.2495 11.0253 92.8041 10.924 93.4441 10.924C93.9135 10.924 94.3135 10.988 94.6441 11.116C94.9855 11.2333 95.2575 11.372 95.4601 11.532C95.6628 11.6813 95.8015 11.804 95.8761 11.9V12.652C95.5135 12.396 95.1455 12.2093 94.7721 12.092C94.3988 11.964 93.9775 11.9 93.5081 11.9C93.0815 11.9 92.7241 11.9587 92.4361 12.076C92.1588 12.1933 91.9508 12.3587 91.8121 12.572C91.6735 12.7853 91.6041 13.0413 91.6041 13.34ZM91.6041 9.868L90.9801 8.892C91.2575 8.68933 91.6308 8.48667 92.1001 8.284C92.5695 8.08133 93.1348 7.98 93.7961 7.98C94.3615 7.98 94.8521 8.07067 95.2681 8.252C95.6948 8.42267 96.0255 8.67333 96.2601 9.004C96.5055 9.33467 96.6281 9.74 96.6281 10.22V15.5H95.3481V10.22C95.3481 9.84667 95.1881 9.56933 94.8681 9.388C94.5588 9.196 94.2015 9.1 93.7961 9.1C93.4441 9.1 93.1241 9.148 92.8361 9.244C92.5481 9.32933 92.2975 9.436 92.0841 9.564C91.8815 9.68133 91.7215 9.78267 91.6041 9.868ZM105.242 8.14V15.5H103.962V9.34H100.202V12.94C100.202 13.516 100.111 13.996 99.9298 14.38C99.7591 14.7533 99.4924 15.036 99.1298 15.228C98.7671 15.4093 98.3084 15.5 97.7538 15.5V14.332C98.0738 14.332 98.3458 14.2307 98.5698 14.028C98.8044 13.8253 98.9218 13.4627 98.9218 12.94V8.14H105.242ZM113.876 9.42L107.796 16.06L107.876 14.22L113.956 7.58L113.876 9.42ZM109.076 8.14V14.3L107.796 16.06V8.14H109.076ZM113.956 7.58V15.5H112.676V9.34L113.956 7.58ZM118.914 13.26V12.06H121.426V13.26H118.914ZM120.514 8.14H121.794V15.5H120.514V8.14ZM117.314 8.14V10.252C117.314 10.6787 117.362 11.0253 117.458 11.292C117.554 11.5587 117.72 11.756 117.954 11.884C118.189 12.0013 118.509 12.06 118.914 12.06V13.26C118.178 13.26 117.597 13.1587 117.17 12.956C116.754 12.7533 116.461 12.4333 116.29 11.996C116.12 11.548 116.034 10.9667 116.034 10.252V8.14H117.314ZM124.952 12.22V11.02H130.392V12.22H124.952ZM129.56 8.14H130.84V15.5H129.56V8.14ZM124.2 8.14H125.48V15.5H124.2V8.14ZM139.887 8.14H141.167V15.5H139.887V8.14ZM133.247 8.14H134.527V15.5H133.247V8.14ZM133.999 12.044V10.924H136.287C137.044 10.924 137.679 11.1107 138.191 11.484C138.714 11.8467 138.975 12.4227 138.975 13.212C138.975 13.7347 138.858 14.1667 138.623 14.508C138.388 14.8493 138.068 15.1 137.663 15.26C137.258 15.42 136.799 15.5 136.287 15.5H133.999V14.38H136.287C136.596 14.38 136.852 14.3373 137.055 14.252C137.268 14.156 137.428 14.0227 137.535 13.852C137.642 13.6707 137.695 13.4573 137.695 13.212C137.695 12.8387 137.578 12.5507 137.343 12.348C137.108 12.1453 136.756 12.044 136.287 12.044H133.999ZM150.551 15.5L149.351 9.66L150.071 7.58L151.991 15.5H150.551ZM146.711 14.396L150.071 7.58L150.231 10.14L147.191 15.996L146.711 14.396ZM147.191 15.996L144.199 10.14L144.359 7.58L147.671 14.396L147.191 15.996ZM142.439 15.5L144.359 7.58L145.079 9.66L143.879 15.5H142.439ZM159.438 9.42L153.358 16.06L153.438 14.22L159.518 7.58L159.438 9.42ZM154.638 8.14V14.3L153.358 16.06V8.14H154.638ZM159.518 7.58V15.5H158.238V9.34L159.518 7.58Z" fill="#2B2B2B"/>
</svg>

                    </div>
                      <div class = "opening-hrs">
                        ${pickupPoint.openingHours}<br>
                        </div>
                      <div class = "address-comment">
                        ${pickupPoint.addressComment}<br>
                        </div>
                        <button id = "select_pickup">ЗАБРАТЬ ЗДЕСЬ</button>
                    </div>
                `,
          hintContent: pickupPoint.name,
        },
      });
    });

    objectManager.add({
      type: "FeatureCollection",
      features: placemarks,
    });
    map.geoObjects.add(objectManager);

    // Add a click event handler to open the balloon content
    // Add a single click event handler to open the modal
    objectManager.objects.events.add("click", function (e) {
      e.preventDefault();
      const objectId = e.get("objectId");
      const object = objectManager.objects.getById(objectId);
      const combinedContent = `${object.properties.balloonContentHeader}<br>${object.properties.balloonContentBody}`;
      






      const parser = new DOMParser();
      const headerDocument = parser.parseFromString(object.properties.balloonContentHeader, "text/html");
      const pickupName = headerDocument.body.textContent;
      document.getElementById("popup-content").innerHTML = combinedContent;
      const selected_pickup = document.getElementById("select_pickup");
      const level2_input_id = document.getElementById("billingAddress");
      // click event on popup button
      selected_pickup.addEventListener("click", () => {
        level2_input_id.value = pickupName;
        closeModal();
        });



      // Show the modal
      document.getElementById("popup").classList.add("active");
    });







    // Close the popup when the close button is clicked
    const closeButton = document.getElementById("close-button");
    closeButton.addEventListener("click", () => {
      document.getElementById("popup").classList.remove("active");
    });

  }



  
  const searchInput = document.getElementById("searchInput");
  searchInput.addEventListener("input", search);
  let resultItem;
  // Search function for pickups
  function search() {
    const searchValue = searchInput.value.toLowerCase();
    const searchResults = document.getElementById("searchResults");
    searchResults.innerHTML = ""; // Clear previous results
    pickupPointData.forEach((pickupPoint) => {
      // Check if any part of the data matches the search input
      if (
        pickupPoint.name.toLowerCase().includes(searchValue) ||
        pickupPoint.addressComment.toLowerCase().includes(searchValue)
      ) {
        resultItem = document.createElement("li");
        resultItem.classList.add("city-list");
        resultItem.innerHTML = `<div class = "side_results_city">${pickupPoint.name} </div> `;
        resultItem.addEventListener("click", () => {
          mapgoto(pickupPoint.coordinates); // Call mapgoto with the corresponding pickupPoint data
        });
        searchResults.appendChild(resultItem);
      }
    });
  }
  search();




  let zoomSet = false; // Flag to track whether the zoom has been set

  function mapgoto(coords) {
    map.panTo([coords.latitude, coords.longitude]);
  
    if (!zoomSet) { // Check if the zoom has been set
      map.setZoom(16, {
        duration: 2000
      });
      zoomSet = true; // Set the flag to true
    }
  }

  
}
